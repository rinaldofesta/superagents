# Supabase Skill

> Open-source Firebase alternative with Postgres, Auth, Storage, and Realtime

## When to Use

Use this skill when working with Supabase for authentication, database, storage, or realtime features.

## Key Concepts

| Concept | Description | Use Case |
|---------|-------------|----------|
| Auth | User authentication system | Sign up, login, OAuth |
| Database | PostgreSQL with REST API | CRUD operations |
| Storage | File storage with CDN | Images, documents |
| Realtime | Live data subscriptions | Chat, notifications |
| Edge Functions | Serverless functions | Custom backend logic |

## Client Setup

```typescript
import { createClient } from '@supabase/supabase-js'

const supabase = createClient(
  process.env.SUPABASE_URL!,
  process.env.SUPABASE_ANON_KEY!,
  {
    auth: {
      autoRefreshToken: true,
      persistSession: true,
    }
  }
)
```

## Authentication

```typescript
// Sign up
const { data, error } = await supabase.auth.signUp({
  email: 'user@example.com',
  password: 'securepassword'
})

// Sign in
const { data, error } = await supabase.auth.signInWithPassword({
  email: 'user@example.com',
  password: 'securepassword'
})

// OAuth
const { data, error } = await supabase.auth.signInWithOAuth({
  provider: 'github'
})

// Get current user
const { data: { user } } = await supabase.auth.getUser()

// Sign out
await supabase.auth.signOut()
```

## Database Queries

```typescript
// Select
const { data, error } = await supabase
  .from('posts')
  .select('*, author:users(name)')
  .eq('published', true)
  .order('created_at', { ascending: false })
  .limit(10)

// Insert
const { data, error } = await supabase
  .from('posts')
  .insert({ title: 'New Post', content: '...' })
  .select()

// Update
const { data, error } = await supabase
  .from('posts')
  .update({ title: 'Updated Title' })
  .eq('id', 1)

// Delete
const { error } = await supabase
  .from('posts')
  .delete()
  .eq('id', 1)
```

## Realtime Subscriptions

```typescript
const channel = supabase.channel('db-changes')

channel.on(
  'postgres_changes',
  { event: '*', schema: 'public', table: 'messages' },
  (payload) => {
    console.log('Change received:', payload)
  }
)

channel.subscribe()

// Cleanup
channel.unsubscribe()
```

## Storage

```typescript
// Upload
const { data, error } = await supabase.storage
  .from('avatars')
  .upload('user-1/avatar.png', file)

// Get public URL
const { data } = supabase.storage
  .from('avatars')
  .getPublicUrl('user-1/avatar.png')
```

## Pitfalls

- Configure Row Level Security (RLS) policies
- Use service role key only on server
- Handle auth state changes properly
- Unsubscribe from realtime channels on cleanup

## Context7

```
mcp__context7__resolve-library-id with "supabase"
mcp__context7__query-docs for specific Supabase questions
```

---

Generated by SuperAgents
